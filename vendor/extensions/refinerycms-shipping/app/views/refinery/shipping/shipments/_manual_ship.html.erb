<%= form_for @manual_shipper ||= ::Refinery::Shipping::ManualShipper.new(shipment: shipment), url: refinery.manual_ship_shipping_shipment_path(shipment) do |f| %>
  <div class="grid-x grid-padding-x">
    <div class="cell">
      <label>Courier <small class="js_courier_label" style="color: #f00;"></small>
        <%= f.text_field :courier_company_label, class: 'js_courier_field' %>
      </label>
    </div>
  </div>

  <div class="grid-x grid-padding-x">
    <div class="cell">
      <label>Tracking Number
        <%= f.text_field :tracking_number %>
      </label>
    </div>
  </div>

  <div class="grid-x grid-padding-x">
    <div class="cell">
      <label>Shipping Date</small>
        <%= f.text_field :shipping_date, value: f.object.shipping_date || Date.today, class: 'js_shipping_date_field' %>
      </label>
    </div>
  </div>

  <div class="grid-x grid-padding-x">
    <div class="cell">
      <p><%= f.submit 'Ship', class: 'button tiny' %></p>
    </div>
  </div>
<% end %>

<% content_for :stylesheets do %>
  <%= stylesheet_link_tag '//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css' %>
<% end %>

<% content_for :javascripts do %>

  <script type="text/javascript">
    $(function(){
      $('.js_shipping_date_field').datepicker({ dateFormat: "yy-mm-dd" });
      $('.js_courier_field').autocomplete({
        source: <%= Refinery::Shipping::Shipment::COURIERS.keys.to_json.html_safe %>,
        change: function(event, ui) {
          if ($(this).data('uiAutocomplete').options.source.indexOf($(this).prop('value')) >= 0) {
            $('.js_courier_label').text('');
          } else {
            $('.js_courier_label').text('Courier not found');
          }
        }
      });
    });
  </script>
<% end %>
