<% content_for :body do %>
  <div class="grid-x grid-padding-x">
    <div class="medium-2 cell">
      <%= link_to t('.go_back', default: 'Go Back'), refinery.shipping_shipments_path, class: 'button tiny' %>
    </div>

    <% if @shipment.status == 'not_shipped' %>
      <div class="medium-2 cell">
        <%= link_to t('.edit_details'), refinery.edit_shipping_shipment_path(@shipment), class: 'button tiny' %>
      </div>

      <% if @shipment.shippable? %>
        <div class="medium-2 cell">
          <%= link_to t('.send_shipment'), '#', class: 'button tiny', 'data-open' => 'send-shipment-modal' %>

          <div id="send-shipment-modal" class="reveal tiny" data-reveal>
            <a class="close-reveal-modal" data-close>&#215;</a>

            <%= render 'manual_ship', shipment: @shipment %>
          </div>
        </div>

        <div class="medium-2 cell">
          <%= link_to t('.send_easypost_shipment'), '#', class: 'button tiny', 'data-reveal-id' => 'send-easypost-modal' %>

          <div id="send-easypost-modal" class="reveal-modal tiny" data-reveal>
            <a class="close-reveal-modal">&#215;</a>
            <%= render 'easypost', shipment: @shipment %>
          </div>
        </div>

      <% else %>
        <%= link_to t('.send_shipment'), '#', class: 'button tiny disabled' %>
      <% end %>

      <div class="medium-2 cell end">
        <%= link_to t('.remove'), refinery.shipping_shipment_path(@shipment), class: 'button tiny alert', method: :delete, confirm: t('.confirm_remove') %>
      </div>

    <% else %>

    <% end %>
  </div>

  <div class="grid-x grid-padding-x">
    <div class="medium-8 cell">
      <div class="grid-x grid-padding-x">
        <div class="medium-6 cell">
          <h4>From
            <% if @shipment.from_address.missing_for_shipment.any? %>
              <small data-tooltip aria-haspopup="true" class="has-tip" title="<%= @shipment.from_address.missing_for_shipment.join('<br/>') %>">Missing information</small>
            <% else %>
              <small><%= link_to 'View on Google Maps', @shipment.from_address.google_maps_url, target: '_blank' %></small>
            <% end %>
          </h4>
          <%= render 'address_card', shipment_address: @shipment.from_address %>
        </div>

        <div class="medium-6 cell">
          <h4>To
            <% if @shipment.to_address.missing_for_shipment.any? %>
              <small data-tooltip aria-haspopup="true" class="has-tip" title="<%= @shipment.to_address.missing_for_shipment.join('<br/>') %>">Missing information</small>
            <% else %>
              <small><%= link_to 'View on Google Maps', @shipment.to_address.google_maps_url, target: '_blank' %></small>
            <% end %>
          </h4>
          <%= render 'address_card', shipment_address: @shipment.to_address %>
        </div>
      </div>

      <div class="grid-x grid-padding-x">
        <div class="cell">
          <%= render 'parcels', shipment: @shipment %>
        </div>
      </div>
    </div>

    <div class="medium-4 cell">
      <%= render 'overview', shipment: @shipment %>
    </div>
  </div>
<% end %>

<%= render '/refinery/content_page' %>
