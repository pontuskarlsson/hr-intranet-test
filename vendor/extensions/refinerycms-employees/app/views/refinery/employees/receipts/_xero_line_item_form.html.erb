<div class="grid-x grid-padding-x">
  <div class="medium-4 cell">
    <%= f.text_field :description %>
  </div>
  <div class="medium-3 cell">
    <%= f.select :xero_account_id, grouped_options_for_select([
                     ['Common', featured_xero_accounts.map { |a| [ a.code_and_name, a.id ] }],
                     ['All', all_xero_accounts.map { |a| [ a.code_and_name, a.id ] }]
                 ], f.object.xero_account_id) %>
  </div>
  <div class="medium-2 cell">
    <div class="row collapse">
      <div class="small-9 cell">
        <%= f.number_field :quantity, step: 'any' %>
      </div>
      <div class="small-3 cell">
        <span class="postfix">Items</span>
      </div>
    </div>
  </div>
  <div class="medium-2 cell">
    <div class="row collapse">
      <div class="small-9 cell">
        <%= f.number_field :unit_amount, step: 'any' %>
      </div>
      <div class="small-3 cell">
        <span class="postfix">HKD</span>
      </div>
    </div>
  </div>
  <div class="medium-1 cell">
    <% if f.object.persisted? %>
      <%= f.check_box :_destroy %>X
    <% else %>
      <%= link_to 'X', '#', class: 'js_remove_line_item' %>
    <% end %>
  </div>
</div>
<% if active_tracking_categories.any? %>
  <div class="grid-x grid-padding-x">
    <% active_tracking_categories.each do |tracking_category| %>
      <div class="medium-4 cell">
        <div class="row collapse">
          <div class="small-6 cell">
            <span class="prefix"><%= tracking_category.name %></span>
          </div>
          <div class="small-6 cell">
            <%= select_tag "#{f.object_name}[tracking_categories_and_options][#{ tracking_category.guid }]", options_for_select(tracking_category.options.map { |o| [o[:name], o[:guid]] }, f.object.persisted? ? f.object.tracking_categories_and_options[tracking_category.guid] : xero_receipt.xero_expense_claim.employee.default_tracking_options[tracking_category.guid]), include_blank: true %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
