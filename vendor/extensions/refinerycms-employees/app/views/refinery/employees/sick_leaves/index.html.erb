<% content_for :body do %>
  <h4>Register Sick Leave</h4>

  <%= render 'quick_form', leave_of_absence: ::Refinery::Employees::LeaveOfAbsence.new %>

  <h4 class="t2">All of your registered Sick Leave occasions</h4>

  <table>
    <thead>
      <tr>
        <th>Start</th>
        <th>End</th>
        <th>Doctor's Note</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
      <% @leave_of_absences.each do |leave_of_absence| %>
        <tr>
          <td><%= leave_of_absence.start_date %></td>
          <td><%= leave_of_absence.end_date %></td>
          <td>
            <% if leave_of_absence.doctors_note.present? %>
              <%= link_to 'Download', leave_of_absence.doctors_note.url %>
            <% else %>
              <%= link_to 'Add Note', refinery.add_note_employees_sick_leave_path(leave_of_absence) %>
            <% end %>
          </td>
          <td>
            <%= link_to 'Edit', refinery.edit_employees_sick_leave_path(leave_of_absence) %>
            <%= link_to 'Remove', refinery.employees_sick_leave_path(leave_of_absence), method: :delete %>
          </td>
        </tr>
      <% end %>
    </tbody>

    <tfoot>
      <tr>
        <th>Start</th>
        <th>End</th>
        <th>Doctor's Note</th>
        <th>Action</th>
      </tr>
    </tfoot>
  </table>
<% end %>

<% content_for :stylesheets do %>
  <%= stylesheet_link_tag '//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css' %>
<% end %>

<%= render '/refinery/content_page' %>
