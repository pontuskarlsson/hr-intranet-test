<% content_for :body do %>
  <% if selected_company.present? %>
    <div class="grid-container">
      <div class="grid-x grid-padding-x">
        <div class="cell medium-offset-2 medium-8 large-offset-3 large-6">
          <%= form_for @request_form, url: refinery.business_requests_path do |f| %>
            <h2>New Request</h2>

            <%= render '/refinery/admin/error_messages',
                       :object => @request_form,
                       :include_object_name => false %>

            <div class="grid-x grid-padding-x">

              <div class="cell">
                <h5><%= f.label :request_date %></h5>
                <%= f.date_field :request_date, required: true -%>
              </div>
            </div>

            <% if current_refinery_user.is_internal? %>
              <h5><%= f.label :requested_by_id, 'Requested By' %></h5>
              <%= f.select :requested_by_id, options_from_collection_for_select(selected_company&.users || [], :id, :label) -%>
            <% end %>

            <h5><%= f.label :subject %></h5>
            <%= f.text_field :subject, required: true %>

            <h5><%= f.label :description %></h5>
            <%= f.text_area :description, style: 'min-height: 20rem;' %>

            <h5>
              <span data-tooltip data-allow-html="true" class="top" tabindex="2" title="<ul><li>Tech Packs</li><li>PO overview</li><li>Shipment & Packing Manuals (if any)</li><li>Quality Standards (if any)</li></ul>">
                <%= f.label :file, 'Add files, see list' %>
              </span>
            </h5>
            <%= f.file_field :file, multiple: true %>

            <p><%= f.submit 'Send', class: 'button primary' %></p>
          <% end %>
        </div>
      </div>
    </div>
  <% else %>
    <p class="italic">Please select a company before creating a request.</p>

    <p><%= link_to 'Select Company', refinery.business_companies_path, class: 'button primary' %></p>
  <% end %>
<% end %>

<% content_for :javascripts do -%>
  <script>
    function addDocumentsToForm(documents) {

    }
  </script>
<% end -%>

<% content_for :stylesheets do -%>
  <%= stylesheet_link_tag '//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css' %>
<% end -%>

<%= render '/refinery/content_page' %>
