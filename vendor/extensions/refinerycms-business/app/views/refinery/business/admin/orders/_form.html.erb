<%= form_for [refinery, :business_admin, @order] do |f| -%>
  <%= render '/refinery/admin/error_messages',
              :object => @order,
              :include_object_name => true %>

  <div class='field'>
    <%= f.label :order_id -%>
    <%= f.text_field :order_id -%>
  </div>

  <div class='field'>
    <%= f.label :buyer_label -%>
    <%= f.text_field :buyer_label, :class => 'js_company_field' -%>
  </div>

  <div class='field'>
    <%= f.label :seller_label -%>
    <%= f.text_field :seller_label, :class => 'js_company_field' -%>
  </div>

  <div class='field'>
    <%= f.label :project_label -%>
    <%= f.text_field :project_label, :class => 'js_project_field' -%>
  </div>

  <div class='field'>
    <%= f.label :order_number -%>
    <%= f.text_field :order_number -%>
  </div>

  <div class='field'>
    <%= f.label :order_type -%>
    <%= f.select :order_type, options_for_select([''] + ::Refinery::Business::Order::TYPES, f.object.order_type) -%>
  </div>

  <div class='field'>
    <%= f.label :order_date -%>
    <%= f.date_field :order_date -%>
  </div>

  <div class='field'>
    <%= f.label :version_number -%>
    <%= f.number_field :version_number -%>
  </div>

  <div class='field'>
    <%= f.label :revised_date -%>
    <%= f.date_field :revised_date -%>
  </div>

  <div class='field'>
    <%= f.label :reference -%>
    <%= f.text_field :reference -%>
  </div>

  <div class='field'>
    <%= f.label :description -%>
    <%= f.text_area :description -%>
  </div>

  <div class='field'>
    <%= f.label :delivery_date -%>
    <%= f.date_field :delivery_date -%>
  </div>

  <div class='field'>
    <%= f.label :delivery_address -%>
    <%= f.text_area :delivery_address -%>
  </div>

  <div class='field'>
    <%= f.label :delivery_instructions -%>
    <%= f.text_area :delivery_instructions -%>
  </div>

  <div class='field'>
    <%= f.label :ship_mode -%>
    <%= f.text_field :ship_mode -%>
  </div>

  <div class='field'>
    <%= f.label :shipment_terms -%>
    <%= f.text_field :shipment_terms -%>
  </div>

  <div class='field'>
    <%= f.label :attention_to -%>
    <%= f.text_field :attention_to -%>
  </div>

  <div class='field'>
    <%= f.label :status -%>
    <%= f.select :status, options_for_select([''] + ::Refinery::Business::Order::STATUSES, f.object.status) -%>
  </div>

  <div class='field'>
    <%= f.label :ordered_qty -%>
    <%= f.number_field :ordered_qty -%>
  </div>

  <div class='field'>
    <%= f.label :shipped_qty -%>
    <%= f.number_field :shipped_qty -%>
  </div>

  <div class='field'>
    <%= f.label :currency_code -%>
    <%= f.select :currency_code, options_for_select([''] + ::Refinery::Business::Order::CURRENCY_CODES, f.object.status) -%>
  </div>

  <div class='field'>
    <%= f.label :total_cost -%>
    <%= f.text_field :total_cost -%>
  </div>

  <div class='field'>
    <%= f.label :account -%>
    <%= f.text_field :account -%>
  </div>

  <h5>Order Items</h5>
  <ul>
    <% @order.order_items.each do |order_item| %>
      <li>
        <%= order_item.article_code %>
        <%= order_item.description %>
        <%= link_to refinery_icon_tag("application_edit.png"), refinery.edit_business_admin_order_item_path(order_item),
                    :title => 'Edit' %>
      </li>
    <% end %>
  </ul>

  <%= render '/refinery/admin/form_actions', :f => f,
             :continue_editing => false,
             :delete_title => t('delete', :scope => 'refinery.business.admin.orders.order'),
             :delete_confirmation => t('message', :scope => 'refinery.admin.delete', :title => @order.label) -%>
<% end -%>

<% content_for :javascripts do -%>
  <script>
    $(document).ready(function(){
      page_options.init(false, '', '');

      $('.js_company_field').autocomplete({
        source: <%= ::Refinery::Business::Company.to_source %>
      });
      $('.js_project_field').autocomplete({
        source: <%= ::Refinery::Business::Project.to_source %>
      });
    });
  </script>
<% end -%>
