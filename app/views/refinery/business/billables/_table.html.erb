<table id="<%= table_id %>" class="display responsive nowrap" cellspacing="0" style="width: 100%;">
  <thead>
  <tr>
    <th></th>
    <% unless options[:view] == :invoice %><th data-dt-search-input="true">Company</th><% end %>
    <th data-dt-search-input="true">Title</th>
    <th data-dt-search-date="true">Date</th>
    <th data-dt-search-input="true">Assigned To</th>
    <th data-dt-search-input="true">Article</th>
    <% unless options[:view] == :invoice %><th data-dt-search-input="true">Invoice</th><% end %>
    <th>Qty</th>
    <th data-dt-search-input="true">Unit</th>
    <th>Unit Price</th>
    <th>Discount</th>
    <th>Total Cost</th>
    <th data-dt-search-input="true">Status</th>
  </tr>
  </thead>

  <tfoot>
  <tr>
    <th></th>
    <% unless options[:view] == :invoice %><th>Company</th><% end %>
    <th>Title</th>
    <th>Date</th>
    <th>Assigned To</th>
    <th>Article</th>
    <% unless options[:view] == :invoice %><th>Invoice</th><% end %>
    <th>Qty</th>
    <th>Unit</th>
    <th>Unit Price</th>
    <th>Discount</th>
    <th>Total Cost</th>
    <th>Status</th>
  </tr>
  </tfoot>
</table>

<%= render 'refinery/datatable_dependencies' %>

<% content_for :javascripts do %>
  <script type="text/javascript">
    $(function() {
      var dt = $('#<%= table_id %>').DataTable({
        "responsive":     true,
        "paging":         true,
        "ajax": "<%= ajax %>",
        "order": [[<%= options[:view] == :invoice ? '2' : '3' %>, 'desc']],
        "columns": [
          { data: "id", "render": { "display": idColumnRendererFor("<%= refinery.business_billables_path %>") } },
            <% unless options[:view] == :invoice %>{ data: "company_label" },<% end %>
          { data: "title" },
          { data: "billable_date", "render": dtDateRenderer },
          { data: "assigned_to_label" },
          { data: "article_code" },
            <% unless options[:view] == :invoice %>{ data: "invoice_invoice_number" },<% end %>
          { data: "qty" },
          { data: "qty_unit" },
          { data: "unit_price", "render": { "display": formatCurrency } },
          { data: "discount" },
          { data: "total_cost", "render": { "display": formatCurrency } },
          { data: "status" },
        ],
        "dom": "<'row grid-x'<'medium-6 columns cell'l><'medium-6 columns cell'f>r>"+
          "t"+
          "<'row grid-x'<'medium-6 columns cell'i><'medium-6 columns cell'p>>"
      });

      initDataTable(dt);
    });
  </script>
<% end %>
