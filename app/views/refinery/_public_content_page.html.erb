<% if @page.try(:live?) %>
  <%- side_body_contents = [@page.part_with_slug('side_body').try(:body), content_for(:side_body)].reject(&:blank?) -%>
  <%- side_body_content = content_for(:side_body).present? ? content_for(:side_body) : @page.part_with_slug('side_body').try(:body) -%>
  <%- body_contents = [@page.part_with_slug('body').try(:body), content_for(:body)].reject(&:blank?) -%>
  <%- body_content = content_for(:body).present? ? content_for(:body) : @page.part_with_slug('body').try(:body) -%>
  <%- body_content_title = content_for(:body_content_title) -%>
  <%- actions = content_for(:actions) -%>
  <div class="grid-container">
    <div class="grid-x grid-padding-x">

      <% if side_body_contents.any? %>

        <div class="medium-8 cell">
          <% if body_content_title.present? %>
            <h1 class="body_content_title"><%=raw body_content_title %></h1>
          <% end %>
          <%=raw body_contents.join %>
        </div>

        <div class="medium-4 cell">
          <%=raw side_body_contents.join %>
        </div>

      <% else %>

        <div class="cell">
          <% if body_content_title.present? %>
            <h1 class="body_content_title"><%=raw body_content_title %></h1>
          <% end %>
          <%=raw body_contents.join %>
        </div>

      <% end %>
    </div>
  </div>

<% else %>
  <%= render '/refinery/draft_page_message' -%>
<% end %>
