<% content_for :head do %>
  <style>
    .activity_wrapper {
      padding: 15px 10px;
      position: relative;
    }
    .activity_wrapper:after{
      content: "";
      clear: both;
      display: block;
    }
    .activity_wrapper .user_image {
      float: left;
      width: 40px;
      height: 40px;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      background-color: #979797;
    }
    .activity_wrapper .user_desc_wrapper {
      float: left;
      width: calc(100% - 130px);
      margin-top: 0;
      margin-left: 10px;
    }
    .activity_wrapper .user_desc_wrapper .user_desc {
      font-size: 12px;
      line-height: 1.6;
      margin-top: 0;
      margin-bottom: 0;
    }
    .activity_wrapper .user_desc_wrapper .user_desc span{
      color: #979797;
      font-weight: bold;
    }
    .activity_wrapper .user_desc_wrapper .user_desc strong{
      font-weight: bold;
    }
  </style>
<% end %>

<% notifications.each do |notification| %>
  <div class="activity_wrapper">
    <div class="user_image">
      <% if notification.notifier.present? %>

      <% else %>
        <%= asset_image_tag 'happy-rabbit.png' %>
      <% end %>
    </div>
    <div class="user_desc_wrapper">
      <p class="user_desc">
        <strong><%= notification.notifier.present? ? notification.notifier.printable_notifier_name : 'Happy Rabbit' %></strong>
        <% if notification.group_member_notifier_exists? %>
          <%= " and #{notification.group_member_notifier_count} other" %>
          <%= notification.notifier.present? ? notification.notifier.printable_type.pluralize.downcase : 'people' %>
        <% end %>
        notified you of
        <% if notification.notifiable.present? %>
          <% if notification.group_member_exists? %>
            <%= " #{notification.group_notification_count} #{notification.notifiable_type.constantize.model_name.human.pluralize.downcase} including" %>
          <% end %>
          <%= notification.notifiable.printable_notifiable_name(notification.target) %>
          <%= "in #{notification.group.printable_group_name}" if notification.group.present? %>
        <% else %>
          <% if notification.group_member_exists? %>
            <%= " #{notification.group_notification_count} #{notification.notifiable_type.constantize.model_name.human.pluralize.downcase}" %>
          <% else %>
            <%= " a #{notification.notifiable_type.constantize.model_name.human.downcase}" %>
          <% end %>
          <%= "in #{notification.group.printable_group_name}" if notification.group.present? %>
          but the notifiable is not found. It may have been deleted.
        <% end %>
        <br>
        <span><%= notification.created_at.strftime("%b %d %H:%M") %></span>
      </p>
      <p class="user_desc">
      <span>
        <%= link_to "Move to notified #{notification.notifiable.printable_type.downcase}", move_notification_url_for(notification, open: true) %>
      </span>
      </p>
    </div>
    <div style="clear:both;"></div>
  </div>
<% end %>
